"use strict";(self.webpackChunkweb_visualizer=self.webpackChunkweb_visualizer||[]).push([[788],{9679:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"embedding-visualizer","title":"Embedding the Visualizer","description":"File 1: Using the iFrame in a React Project","source":"@site/docs/2-embedding-visualizer.md","sourceDirName":".","slug":"/embedding-visualizer","permalink":"/visualizer-docs/docs/embedding-visualizer","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/2-embedding-visualizer.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to the Visualizer Integration Tutorial","permalink":"/visualizer-docs/docs/intro"},"next":{"title":"Handling Events from the Visualizer iFrame","permalink":"/visualizer-docs/docs/receiving-events"}}');var s=i(4848),o=i(8453);const t={},a="Embedding the Visualizer",l={},c=[{value:"1. Project Setup",id:"1-project-setup",level:2},{value:"Dependencies",id:"dependencies",level:3},{value:"File Structure",id:"file-structure",level:3},{value:"2. iFrame Component",id:"2-iframe-component",level:2},{value:"Key Props and Logic",id:"key-props-and-logic",level:3},{value:"3. Context Setup",id:"3-context-setup",level:2},{value:"iframeContext.js",id:"iframecontextjs",level:3},{value:"App.js Configuration",id:"appjs-configuration",level:3},{value:"4. Sending Commands",id:"4-sending-commands",level:2},{value:"5. Performance Tips",id:"5-performance-tips",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"embedding-the-visualizer",children:"Embedding the Visualizer"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File 1: Using the iFrame in a React Project"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"#general-flow",children:"View diagrams"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"integrating-the-visualizer-iframe-in-react",children:"Integrating the Visualizer iFrame in React"}),"\n",(0,s.jsx)(n.p,{children:"This tutorial covers how to embed and manage a dynamic visualizer iFrame in a React application, including communication setup and performance optimizations."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-project-setup",children:"1. Project Setup"}),"\n",(0,s.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(n.p,{children:["Install ",(0,s.jsx)(n.code,{children:"papaparse"})," for parsing data (colors, vehicles):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install papaparse\n"})}),"\n",(0,s.jsx)(n.h3,{id:"file-structure",children:"File Structure"}),"\n",(0,s.jsxs)(n.p,{children:["Ensure your project includes these files (download from ",(0,s.jsx)(n.a,{href:"https://github.com/AamirMoBad/web-visualizer-2",children:"GitHub"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-plaintext",children:"src/\n\u251c\u2500\u2500 components/\n\u2502   \u2514\u2500\u2500 Iframe.jsx          # iFrame wrapper component\n\u251c\u2500\u2500 context/\n\u2502   \u2514\u2500\u2500 iframeContext.js    # Communication logic\n\u2514\u2500\u2500 App.js                  # Context providers setup\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-iframe-component",children:"2. iFrame Component"}),"\n",(0,s.jsx)(n.h3,{id:"key-props-and-logic",children:"Key Props and Logic"}),"\n",(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"Iframe.jsx"})," component to embed the visualizer. Critical props:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isMobile"}),": Toggle mobile/desktop layouts."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"vehicleUUID"}),": Unique identifier for the 3D model."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"showLoadingMenu"}),": Controls overlay states."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Code Implementation"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// Iframe.jsx (simplified)\nexport function Iframe({ isMobile, vehicleUUID, showLoadingMenu }) {\n  return (\n    <iframe\n      src={`${process.env.REACT_APP_VISUALIZER_URL}/?vehicle=${vehicleUUID}`}\n      className="iframe-content"\n      sandbox="allow-scripts allow-same-origin allow-pointer-lock"\n      title="Wraps Visualizer"\n    />\n  );\n}\n'})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Important"}),": Memoize the component to prevent unnecessary re-renders that reset the iframe state."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-context-setup",children:"3. Context Setup"}),"\n",(0,s.jsx)(n.h3,{id:"iframecontextjs",children:"iframeContext.js"}),"\n",(0,s.jsxs)(n.p,{children:["This context provides the iframe reference and a ",(0,s.jsx)(n.code,{children:"sendCommand"})," function to dispatch actions to the visualizer."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// iframeContext.js\nexport function IframeProvider({ children }) {\n  const ref = useRef(null);\n\n  const sendCommand = (command) => {\n    ref.current.contentWindow.postMessage(\n      command,\n      process.env.REACT_APP_VISUALIZER_URL\n    );\n  };\n\n  return (\n    <IframeContext.Provider value={{ iframe: ref, sendCommand }}>\n      {children}\n    </IframeContext.Provider>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"appjs-configuration",children:"App.js Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Wrap your app with the context providers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// App.js\nfunction App() {\n  return (\n    <IframeProvider>\n      <ColorProvider>\n        <WrapperProvider>\n          <Router>\n            <Routes>\n              <Route path="/visualizer" element={<Visualizer />} />\n            </Routes>\n          </Router>\n        </WrapperProvider>\n      </ColorProvider>\n    </IframeProvider>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-sending-commands",children:"4. Sending Commands"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"sendCommand"})," to trigger visualizer actions:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'// Example: Changing car color\nconst { sendCommand } = useIframe();\n\nconst handleColorChange = (colorUUID) => {\n  sendCommand({\n    type: "Paint",\n    UUID: colorUUID,\n  });\n};\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Supported Commands"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Paint"}),": Apply a color/vinyl."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Zoom"}),": Adjust camera zoom."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Vehicle"}),": Switch 3D models."]}),"\n",(0,s.jsxs)(n.li,{children:["Full list in ",(0,s.jsx)(n.a,{href:"#commands-workflow",children:"commands workflow"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-performance-tips",children:"5. Performance Tips"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Avoid re-rendering the iFrame by memoizing props."}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"useRef"})," to persist the iframe reference across renders."]}),"\n",(0,s.jsxs)(n.li,{children:["Preload vehicle data using ",(0,s.jsx)(n.code,{children:"getCars.js"})," utility."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"General Flow Diagram",src:i(3571).A+"",width:"573",height:"641"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"Fig 1. High-level communication flow between components"})]}),"\n",(0,s.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3571:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/general-flow-8d46c48ccf1e221e6bd4ec3bca25ee1c.svg"},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var r=i(6540);const s={},o=r.createContext(s);function t(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);